{% extends "../base.html" %}

{% load static i18n %}

{% block page_css %}
  <link href="{% static 'css/famous_tracks.css' %}" rel="stylesheet" />
{% endblock page_css %}
{% block content %}
  <div class="container content-container overflow-scroll">
    <div class="row mx-5">
      <div class="col mt-3 status-bar">
        <div class="row d-flex justify-content-evenly">
          {% for round, score in rounds.items %}
            <div class="col-1 mx-1 status-pill {% if score >= 1 %} pill-correct {% elif score == -1 %} pill-incorrect {% else %} pill-not-started {% endif %}">
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="row mx-5 d-flex justify-content-center">
      <div class="col-auto mt-4 quiz-card">
        <!-- Track image -->
        <div class="row">
          <img class="image-fluid track-image"
               src=" {% for track in track_list %} {% if track.pk == correct_track_pk %}{{ track.image.url }}{% endif %} {% endfor %} "
               alt="" />
        </div>
        <!-- Text below image & round info -->
        <div class="row mt-4">
          <div class="col">
            <h2>Which track is this?</h2>
          </div>
        </div>
        <div class="row mt-3">
          <form action="{% url 'games:famous_tracks' %}"
                id="track-choice-form"
                method="post">
            {% csrf_token %}
            <div class="col-auto track-choices">
              {% for track in track_list %}
                <label class="track-choice-label">
                  <input type="radio"
                         name="track"
                         value="{{ track.pk }}"
                         required
                         onchange="submitForm()" />
                  <div class="track-choice-content">{{ track.name }}</div>
                </label>
              {% endfor %}
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script>
    function submitForm() {
      const form = document.getElementById('track-choice-form');
      form.submit();
    }
  </script>
{% endblock content %}
